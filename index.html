<!DOCTYPE html>
<html>

<head>
    <title>My File Web Client</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="logged_out">
        <h1>Welcome to TreeDrive File Sharing</h1>
        <p>Enter a username and click Login:</p>
        <input type="text" id="username" placeholder="Enter a username">
        <button onclick="login()">Login</button>
    </div>

    <div id="logged_in" style="display: none;">
        <h1 id="welcome_message">Welcome, user</h1>
        <h2>File Operations</h3>
        <div style="margin-bottom: 10px;">
            <button onclick="list()">Refresh File List</button>
        </div>

    <!--FILE LIST TABLE-->
    <div id="fileTableWrapper" style="display: none;">
    <table id="fileTable" border="1">
        <thead>
        <tr>
            <th>Filename</th>
            <th>Owner</th>
            <th>Size (MB)</th>
            <th>Timestamp</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
    </div>

    <p id="emptyMessage">
    There are no files on the server.
    </p>

    <!--UPLOAD FILE-->
    <div style="margin-bottom: 10px;">
        <h3>Upload File</h3>
        
        <!-- Hidden actual file input -->
        <input type="file" id="fileInput" style="display: none;" onchange="handleFileSelected()">

        <!-- Visible trigger button -->
        <button onclick="document.getElementById('fileInput').click()">Choose File</button>

        <!-- Selected filename display -->
        <span id="selectedFilename" style="margin-left: 10px;">No file chosen</span>

        <!-- Upload button -->
        <button onclick="uploadFile()" style="margin-left: 10px;">Upload</button>
    </div>

    <!--DOWNLOAD FILE-->
    <div style="margin-bottom: 10px;">
        <h3>Download File</h3>
        <input type="text" id="download_field" placeholder="Enter a filename to download" style="width: 300px;">
        <button onclick="download_file()">Download</button>
    </div>

    <!--DELETE FILE-->
    <div style="margin-bottom: 10px;">
        <h3>Delete File</h3>
        <input type="text" id="delete_field" placeholder="Enter a filename to delete" style="width: 300px;">
        <button onclick="delete_file()">Delete</button>
    </div>

    <!--LOGOUT BUTTON-->
    <div style="margin-top: 50px;">
        <button class="logout-button" onclick="logout()">Logout</button>
    </div>

    <script src="script.js"></script>
</body>

</html>